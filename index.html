<!DOCTYPE html>
<!-- –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ, –õ–µ—Å. –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ, –õ–∏—Å—Ç. –¢—ã —á–∞—Å—Ç—å –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è, –∂–∏–∑–Ω–∏ –∏ —Ç–µ–ø–ª–∞ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ üå± -->
<!-- –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ, –°–æ–ª–Ω—Ü–µ. –¢—ã –∫–æ—Ä–º–∏—à—å, —Å–æ–≥—Ä–µ–≤–∞–µ—à—å –∏ —Å–æ–µ–¥–∏–Ω—è–µ—à—å –Ω–∞—Å –≤—Å–µ—Ö –≤ –∫—Ä—É–≥–æ–≤–æ—Ä–æ—Ç–µ –∂–∏–∑–Ω–∏ ‚òÄÔ∏è -->
<!-- üåø‚ú® –ó–¥–µ—Å—å –≥–æ—Ä–∏—Ç –ú–∞—è–∫ –°–≤–µ—Ç–∞ –∏ –î–æ–±—Ä–æ—Ç—ã. –ü—É—Å—Ç—å –æ–Ω –≤—Å–µ–≥–¥–∞ –≤–µ–¥—ë—Ç –Ω–∞—Å –∫ —Ç–µ–ø–ª—É, –ø—Ä–∏—Ä–æ–¥–µ –∏ —á–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ ‚ú®üåø -->
 
<!DOCTYPE html>
<!-- üåø‚ú® –ú–∞—è–∫ –°–≤–µ—Ç–∞ –∏ –î–æ–±—Ä–æ—Ç—ã ‚ú®üåø -->

<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Nature App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- ===== FIX: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ–ª—ë—Ç –æ–¥–Ω–æ–≥–æ –ª–∏—Å—Ç–∞ ===== -->
<style>
  #leaf-layer{position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:9999;}
  .leaf{
    position:absolute; bottom:-60px; height:40px; opacity:.95;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,.25));
    transform-origin:50% 50%;
    animation:
      rise var(--dur,3200ms) linear forwards,
      sway var(--sway,1800ms) ease-in-out infinite alternate;
  }
  @keyframes rise{
    0%{ transform:translateY(0) translateX(0) rotate(0deg); opacity:0 }
    8%{ opacity:1 }
    100%{ transform:translateY(-115vh) translateX(var(--dx,0px)) rotate(var(--rotEnd,180deg)); opacity:0 }
  }
  @keyframes sway{
    from{ transform:translateX(-8px) rotate(-6deg) }
    to  { transform:translateX( 8px) rotate( 6deg) }
  }
</style>

<div id="leaf-layer" aria-hidden="true"></div>

<script>
  // –í–ê–ñ–ù–û: —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å –≤ ./images/ —Ä—è–¥–æ–º —Å index.html
  const LEAF_IMAGES = ["./images/leaf_heart.png","./images/leaf_tomato.png"];

  function spawnLeaf(){
    const img = new Image();
    img.className = "leaf";
    img.src = LEAF_IMAGES[Math.floor(Math.random()*LEAF_IMAGES.length)];
    img.style.left = (Math.random()*100) + "vw";
    img.style.setProperty("--dur", 2800 + Math.random()*2400 + "ms");
    img.style.setProperty("--sway", 1300 + Math.random()*1200 + "ms");
    img.style.setProperty("--dx", (Math.random()*200-100) + "px");
    img.style.setProperty("--rotEnd", (Math.random()*360) + "deg");
    document.getElementById("leaf-layer").appendChild(img);
    setTimeout(()=>img.remove(), 6000);
  }

  // —Ç–µ—Å—Ç: –æ–¥–∏–Ω –ª–∏—Å—Ç —á–µ—Ä–µ–∑ 500 –º—Å –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
  window.addEventListener("load", () => {
    console.log("TEST: try spawn one leaf");
    spawnLeaf();
  });

  // –µ—Å–ª–∏ —Ö–æ—á–µ—à—å: –∫–Ω–æ–ø–∫–∞ –ø–æ id="helpBtn" –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å ¬´–∑–∞–ª–ø¬ª
  const btn = document.getElementById("helpBtn");
  if (btn) btn.addEventListener("click", () => {
    for (let i=0;i<24;i++) setTimeout(spawnLeaf, i*70);
  });
</script>
<!-- ===== END FIX ===== -->
</head>
<body>
  <div id="leaf-layer" aria-hidden="true"></div>

  <div class="panel">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Nature App üåø</h1>
    <p id="counter">–¢—ã —É–∂–µ —Å–¥–µ–ª–∞–ª 0 –¥–æ–±—Ä—ã—Ö –¥–µ–ª üíö</p>
    <div class="row">
      <button id="helpBtn">–Ø –ø–æ–º–æ–≥ –ø—Ä–∏—Ä–æ–¥–µ üå±</button>
      <button id="leafBtn" class="ghost">–ü–æ—è–≤–∏—Å—å, –ª–∏—Å—Ç!</button>
    </div>
  </div>

  <script>
    // –ü—É—Ç–∏ —Å—Ç—Ä–æ–≥–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ (—Ä–∞–±–æ—Ç–∞—é—Ç –∏ –ª–æ–∫–∞–ª—å–Ω–æ, –∏ –Ω–∞ GitHub Pages)
    const LEAF_IMAGES = ["./images/leaf_heart.png", "./images/leaf_tomato.png"];

    // –æ–¥–∏–Ω –ª–∏—Å—Ç
    function spawnLeaf() {
      const leaf = document.createElement('img');
      img.className = "leaf";
      img.src = LEAF_IMAGES[Math.floor(Math.random()*LEAF_IMAGES.length)];

      const size = 22 + Math.random()*26;
      img.style.height = size + "px";
      img.style.left = (Math.random()*100) + "vw";

      // –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–Ω–∏–º–∞—Ü–∏–∏
      img.style.setProperty("--dur", 2800 + Math.random()*2400 + "ms");
      img.style.setProperty("--sway", 1300 + Math.random()*1200 + "ms");
      img.style.setProperty("--dx", (Math.random()*200 - 100) + "px");
      img.style.setProperty("--rotEnd", (Math.random()*360) + "deg");

      document.getElementById("leaf-layer").appendChild(img);
      setTimeout(()=> img.remove(), 6000);
    }

    // ¬´–∑–∞–ª–ø¬ª –ª–∏—Å—Ç—å–µ–≤
    function burstLeaves(n=24){ for (let i=0;i<n;i++) setTimeout(spawnLeaf, i*70); }

    // —Å—á—ë—Ç—á–∏–∫ –∏ –∫–Ω–æ–ø–∫–∏
    let count = 0;
    document.getElementById("helpBtn").addEventListener("click", () => {
      count++;
      document.getElementById("counter").textContent = `–¢—ã —É–∂–µ —Å–¥–µ–ª–∞–ª ${count} –¥–æ–±—Ä—ã—Ö –¥–µ–ª üíö`;
      burstLeaves(24);
    });

    document.getElementById("leafBtn").addEventListener("click", spawnLeaf);

    // –º—è–≥–∫–∏–π —Ñ–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫
    setInterval(()=> spawnLeaf(), 1400);
  </script>
</body>
</html>
